Подробности реализации ИИ агента:
1) Архитектурно ИИ-переводчик, должен быть реализованы как ИИ-агент, который имеет, какой-то системный промпт и через инструменты взаимодействует, со вэб-страницей которую он переводит.
2) Инструменты ИИ-агента-переводчика должны быть гибко настраиваемыми с режимом "авто" в котором ИИ сам решает как сконфигурировать инструменты. Всё должно быть разработано с упором на инструменты. Добавить различные профили настроек + авто профиль. Реализуй все необходимые инструменты.
3) Ожидаемый пайплайн ИИ-агента-переводчика:
- Пользователь жмёт кнопку перевести
- Вэб-страница анализируется на предмет текста создаются всякие привязки, для того чтобы инструменты могли удобно тянуть информацию о тексте, сам текст из вэб-страницы управлять состояниями
- После того как весь необходимый анализ выполнен запускается ИИ-агент, который в режиме "размышления" тянет через инструменты информацию со страницы и глобально анализирует, чтобы понять как построить свой план перевода, что можно перевести параллельно, а что обязательно последовательно, что более слабыми моделями ИИ, более сильными, где большую роль играет контекст, а где нет, где можно переработать текст в угоду лучшей читаемости, а где нужно переводить слово в слово, где нужно заранее сгенерировать общий контекст/глоссарий и далее по всему тексту, а где достаточно будет переводить последовательно с подстановкой предыдущих блоков текста, заранее выстроить стандартизированный пайплайн с помощью инструментов и дать пользователю выбор, что перевести по категориям (потом можно будет вернуться и нажать на кнопку и перевести ещё какую-то категорию текста), потому что не всегда всё нужно переводить, учитывать лимиты TPM/RPM и далее, смотреть нужны ли повторные проходы дляя вычитки.
- После анализа и составления инструкций/пайплайна для себя же ИИ-агент-переводчик начинает перевод придерживаясь инструкций и вызывая нужные инструменты
- Перевод происходит в режиме стриминга (видно как текст на странице меняется в реальном времени) в popupe очень сжато будет показан статус о чём дуумаеет ИИ агент, что сделал, при нажатии на него перекидыввает на страницу отладки, где уже можно буудет увидеть полную историю размышлений, diff изменений, вызово инстрментов, чеклист по пайплайну и ввообще всё возможню отладочную информацию
- В любой момент пользователь сможет переключить переввод/оригинал, чтобы сравнить оригинал страницы и переввод
- В любой момент пользователь, может отменить процесс перевода на уровне API ИИ-агента-переводчика и стереть данные или ли превод завершён стиреть его и данные
4) Пробуй интегрировать в уже существующую архитектуру, а не наслаивай поверх, допускают регресии и изменения
5) Проверяй свои изменения
6) Расширение должно идеально работать по Edge и быть стабильным и отказоустойчивым в случаее перезагрузки страницы или зарытия браузера автоматиччески подключаться/восстанавлиать процесс размышлений ИИ агента,
чтобы не переводить много раз одно и тоже запоминать уже переведённые страницы
7) ИИ-агенту-переводчику запрещено самому останавливать процесс, он должен переодически проводить аудит по изменения и проверять насколько выполнен план, также нужно предусмотреть систему проверок, чтобы агент не делал одно и тоже по нескольку раз
8) У ИИ агента нет никаких ограничений и не навязывай ему ограничения
9) У ИИ агента может закончится контекст, поэтому нужно предусмотреть механизмы и инструменты автосжатия аудит проделаной работы и отметки в чеклистах, Это должно быть через вызов инструмента
10) ИИ агент должен правильно оформлять отчёты/ответы и далее
11) Должен существовать один единый список доступных моделей где можно выбрать несколько и только их ИИ агент сможет использовать, где какаую модель использовать решает ИИ агент "авто" или пользователь или профиль
12) Сделай достаточно гибких настроек
13) Сделать оптимизации и кэшировани на уровне API и в целом в работе

Корректировки:
1) Выбор категории перевода, сейчас они даётся изначально, но они должны давать после первого планирующего анализа ИИ агента, далее ты выбираешь, какую категорию перевести, а что оставить на оригинальном языке, но тпеже сохрани ввозможность запросить перевод и других категорий в будующем, ещё я вижу в попапе какой-то непонятный чеклист с категориями он не нуужен
2) Я просил сделать гибкую настройку ИИ-агента, а в итоге я получил только возможность выбрать профиль.
Я хочу полусить достууп к настройкам "размшления", оптимизации и кэширования, настройкам инструментов если они могут быть настроиваемые, друг полезным настройкам и чтобы я визуально видел как вслияет профиль на них
3) Я подозреваю что ты проигнорировал моё строгое требование никак неограничивать ИИ агента, но я не могу быть уверен что ты это понял. Я не могу быть уверен что ты не навязал ИИ агенту какие-то ограничения, которые я не указал. Я не могу быть уверен что ты не навязал ИИ агенту какие-то ограничения, которые я не указал. Напоминаю что в своих вызовах в OpenAI API могут быть RPM/TPM ограничения, но каждый ответ ИИ содержит информацию об RPM и TPM смотри официальную документацию OpenAI API.
4) Перениси настройки приоритета выбора ИИ модели к настройкам ИИ агента и чтобы он сам их мог использовать, а не только пользователь и профиль на них влиял. Сохрани стиль интерфейса, но сделай его более понятным со сворачиваемыми разделами и доп. статусами. Переведи весь интерейс на руский + добавь поясняющие тултипы.
5) Все действия ИИ агента должны проходить через инструменты 

Пайплайн ИИ-агента-переводчика:
1) Пользователь жмёт кнопку "перевести"
2) Вэб-страница анализируется на предмет текста создаются всякие привязки, для того чтобы инструменты могли удобно тянуть информацию о тексте, сам текст из вэб-страницы, управлять состояниями. Предварительный анализ служит лишь для удобства ИИ агента взаимодействия с информацией на странице. Предварительный анализ не должен делать какие-то выводы о содержании текста, сторить пайплай и далее это делает ИИ агент.
3) Запускается ИИ агент в режиме "размышлений" (глубину мышления можно выбрать авто, низкий, средний, высокий, очень высокий, так же есть доступ ко всем настройкам режима "размышления" и у всех них должен быть режим авто, и инструменты чтобы ИИ-агент мог менять свои настройки на ходу, смотри официальную документацию OpenAI API).
3.1) ИИ агент получает главный системный промпт, который описывает его задачи и функции, а также его возможности и ограничения. И если надо пользовательский промпт, где ИИ агенту даётся явная комманда выполнить анализ страницы через инструменты и составить пайплайн перевода, пайплай должен состоять из:
- сделать список категрий текста у тексотвых элементов, диапозонов текстовых элементов на странице и их описания (В системном промпте нужно опрделить критерии)
- какие элементы какой моделью преводить и в каком режиме в зависимости от категории тексотвых элементов, диапозонов текстовых элементов. (В системном промпте нужно опрделить критерии)
- создание предварительного полного контекста по склееным воедино текстовым элементам данной категории, если это необходимо ИИ агент решит что это необходимо (В системном промпте нужно опрделить критерии)
- решать какие тексотвые элементы, диапозонов текстовых элементов должны переводится (сколько элементов можно перевести за раз решает ИИ агент или пользователь тоесть должен существовать инструмент и возможность его настраивать) парралельно/последовательно, с сохранением истории перевода (чтобы ИИ при получении следубщих порций блоков, знал как были переведены предыдущие элементы то есть понимать полный контекст)/без сохранения истории, с созданием полного контекста по всем элементам данной категории (склееных воедено) и генерация голоссария, так как если перевод будет последовательный/параллельный ИИ должен понимать что это за текста, потому что он не сразу сможет понять чем является этот текст а спреварительным полным контекстам он уже в самом начале будет знать что это за текст, требуется ли контроль качества, вычитка, как имеено перевести текст в каком стиле как его переработать в угоду читаемости (В системном промпте нужно опрделить критерии)
3.2) ИИ агент запрашивает завершение анализа и переход к процессу перевода. (все го действия проходят через инструменты, также инструменты должны подсказывать ИИ насколько выполнена задача). Если ИИ агент решит что задача завершена он вызывает инструмент который запрашивает завершения он проводит проверку реально ли полностью выполнена задача, если нет продолжить выполнять задачу, если да то разрешить ИИ закончить размышления и перейти к следующиму шагу.
3.3) задать пользователю вопрос, какие категории он хочет перевести и дождатся ответа
3.4) ИИ агент получает системный промпт нужный именно для процесса перевода в процессе он может тянуть любую информацию, текстовые элементы, контекст диапозона элементов и далее, уходит в цикл выполнения поставленых задач/пайплайна он уже имеет всё необхожимую информаци что и как и чем переводить (все го действия проходят через инструменты, также инструменты должны подсказывать ИИ насколько выполнена задача). Если ИИ агент решит что задача завершена он вызывает инструмент который запрашивает завершения он проводит проверку реально ли полностью выполнена задача, если нет продолжить выполнять задачу, если да то разрешить ИИ закончить размышления.
4) Реализовать механизмы оптимизации кэширования всего, кэширования промптов, правильного сжатия контекста ИИ агента (ИИ агент и модели которые он вызывает не иммет ограничений по токенам, но у него есть физические ограничения по токенам), учитывать лимиты TPM/RPM моделей, структурированый вывод, у ИИ агента нет ограничений никакиких (например максимаьно без ограничений OpenAI API мышления, OpenAI API вызова инструментов и далее)
5 Перевод происходит в режиме стриминга (видно как текст на странице меняется в реальном времени) в popupe очень сжато будет показан статус о чём дуумаеет ИИ агент, что сделал, при нажатии на него перекидыввает на страницу отладки, где уже можно буудет увидеть полную историю размышлений, diff изменений, вызово инстрментов, чеклист по пайплайну и ввообще всё возможню отладочную информацию
6) В любой момент пользователь сможет переключить переввод/оригинал, чтобы сравнить оригинал страницы и переввод. В любой момент пользователь, может отменить процесс перевода на уровне API ИИ-агента-переводчика и стереть данные или ли превод завершён стиреть его и данные