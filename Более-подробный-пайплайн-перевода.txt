Пайплайн ИИ-агента-переводчика:
1) Пользователь жмёт кнопку "перевести"
2) Вэб-страница анализируется на предмет текста создаются всякие привязки, для того чтобы инструменты могли удобно тянуть информацию о тексте, сам текст из вэб-страницы, управлять состояниями, составлением предварительных категорий, которые можно аналитически получить из вэб-страницы (не у всех страниц их можно явно получить всё зависит от разработчиков сайтов) текстовых элементо и созданий предварительных объединений тектовых элементов в диапазоны по категориям. Предварительный анализ служит лишь для удобства ИИ агента взаимодействия с информацией на странице. Предварительный анализ не должен делать какие-то выводы о содержании текста, сторить пайплай и далее это делает ИИ агент.
3) Запускается ИИ агент в режиме "размышлений" (глубину мышления можно выбрать авто, низкий, средний, высокий, очень высокий, так же есть доступ ко всем настройкам режима "размышления" и у всех них должен быть режим авто, и инструменты чтобы ИИ-агент мог менять свои настройки на ходу, смотри официальную документацию OpenAI API).
3.1) ИИ агент получает главный системный промпт, который описывает его задачи и функции, а также его возможности и ограничения. И если надо пользовательский промпт, где ИИ агенту даётся явная комманда выполнить анализ страницы через инструменты и составить пайплайн перевода, пайплай должен состоять из:
- сделать список категрий текста у тексотвых элементов, диапозонов текстовых элементов на странице и их описания (В системном промпте нужно опрделить критерии)
- какие элементы какой моделью преводить и в каком режиме в зависимости от категории тексотвых элементов, диапозонов текстовых элементов. (В системном промпте нужно опрделить критерии)
- создание предварительного полного контекста по склееным воедино текстовым элементам данной категории, если это необходимо ИИ агент решит что это необходимо (В системном промпте нужно опрделить критерии)
- решать какие тексотвые элементы, диапозонов текстовых элементов должны переводится (сколько элементов можно перевести за раз решает ИИ агент или пользователь тоесть должен существовать инструмент и возможность его настраивать) парралельно/последовательно, с сохранением истории перевода (чтобы ИИ при получении следубщих порций блоков, знал как были переведены предыдущие элементы то есть понимать полный контекст)/без сохранения истории, с созданием полного контекста по всем элементам данной категории (склееных воедено) и генерация голоссария, так как если перевод будет последовательный/параллельный ИИ должен понимать что это за текста, потому что он не сразу сможет понять чем является этот текст а спреварительным полным контекстам он уже в самом начале будет знать что это за текст, требуется ли контроль качества, вычитка, как имеено перевести текст в каком стиле как его переработать в угоду читаемости (В системном промпте нужно опрделить критерии)
3.2) ИИ агент запрашивает завершение анализа и переход к процессу перевода. (все го действия проходят через инструменты, также инструменты должны подсказывать ИИ насколько выполнена задача). Если ИИ агент решит что задача завершена он вызывает инструмент который запрашивает завершения он проводит проверку реально ли полностью выполнена задача, если нет продолжить выполнять задачу, если да то разрешить ИИ закончить размышления и перейти к следующиму шагу.
3.3) задать пользователю вопрос, какие категории он хочет перевести и дождатся ответа
3.4) ИИ агент получает системный промпт нужный именно для процесса перевода в процессе он может тянуть любую информацию, текстовые элементы, контекст диапозона элементов и далее, уходит в цикл выполнения поставленых задач/пайплайна он уже имеет всё необхожимую информаци что и как и чем переводить (все го действия проходят через инструменты, также инструменты должны подсказывать ИИ насколько выполнена задача). Если ИИ агент решит что задача завершена он вызывает инструмент который запрашивает завершения он проводит проверку реально ли полностью выполнена задача, если нет продолжить выполнять задачу, если да то разрешить ИИ закончить размышления.
4) Реализовать механизмы оптимизации кэширования всего, кэширования промптов, правильного сжатия контекста ИИ агента (ИИ агент и модели которые он вызывает не иммет ограничений по токенам, но у него есть физические ограничения по токенам), учитывать лимиты TPM/RPM моделей, структурированый вывод, у ИИ агента нет ограничений никакиких (например максимаьно без ограничений OpenAI API мышления, OpenAI API вызова инструментов и далее)
5 Перевод происходит в режиме стриминга (видно как текст на странице меняется в реальном времени) в popupe очень сжато будет показан статус о чём дуумаеет ИИ агент, что сделал, при нажатии на него перекидыввает на страницу отладки, где уже можно буудет увидеть полную историю размышлений, diff изменений, вызово инстрментов, чеклист по пайплайну и ввообще всё возможню отладочную информацию
6) В любой момент пользователь сможет переключить переввод/оригинал, чтобы сравнить оригинал страницы и переввод. В любой момент пользователь, может отменить процесс перевода на уровне API ИИ-агента-переводчика и стереть данные или ли превод завершён стиреть его и данные